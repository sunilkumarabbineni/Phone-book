<div id="content"></div>
body{
  background:#f3f3f3;
  font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size:16px;
}
h1, h2, h3, h4{
  color:#333;
}
#content{
  padding:2em;
  overflow:hidden;
}
.addContactForm{
  float:left;
  margin-right:30px;
}
.addContactForm input{
  display:block;
  margin:0 0 15px 0;
  padding:10px;
  width:250px;
  border:1px solid #ccc;
}
.phoneBookList{
  overflow:hidden;
  border-left:1px solid #ccc;
  padding-bottom:30px;
}
.contact{
  border-bottom:1px solid #ccc;
  padding:20px;
}
.contact h2{
  margin:0;
  font-size: 1.2em;
}
.contact p{
  margin:0;
}
button{
  padding:10px 30px;
  background:#f8a035;
  color:#fff;
  border:none;
}
var data = [
        {name: "Juani dela Cruz", number: "+639221113434"},
        {name: "Norah Jones", number: "+639223333434"}
        ];
      
var PhoneBookApp = React.createClass({
  loadDataFromVar: function(){
      this.setState({data: data});
  },
  handleContactSubmit: function(contact){
      this.props.data.push(contact);
      console.log(this.props.data);
  },
  getInitialState: function(){
      return{data: []};
  },
  componentDidMount: function(){
      this.loadDataFromVar();
      setInterval(this.loadDataFromVar, this.props.pollInterval);
  },
  render: function(){
      return (
          <div className="phoneBookApp">
              <h1>My PhoneBook</h1>
            <AddContactForm onContactSubmit={this.handleContactSubmit} />
              <PhoneBookList data={this.props.data} />
          </div>
      )
  }
});

var PhoneBookList = React.createClass({
  render: function(){
      var contactNodes = this.props.data.map(function(contact) {
          return(
              <Contact name={contact.name} number={contact.number} />
          )
      });
      return (
          <div className="phoneBookList">
              {contactNodes}
          </div>
      )

  }
});

var AddContactForm = React.createClass({
  handleSubmit: function(e){
      e.preventDefault();
      var name = React.findDOMNode(this.refs.name).value.trim();
      var number = React.findDOMNode(this.refs.number).value.trim();

      if(!name || !number){
          return;
      }
      this.props.onContactSubmit({name: name, number: number});

      React.findDOMNode(this.refs.name).value = '';
      React.findDOMNode(this.refs.number).value = '';
      return;
  },
  render: function(){
      return (
          <form className="addContactForm" onSubmit={this.handleSubmit}>
              <input type="text" placeholder="Name" ref="name" />
              <input type="text" placeholder="Number" ref="number" />
              <button type="submit">Add Contact</button>
          </form>
      );
  }
});

var Contact = React.createClass({
  render: function(){
      return(
          <div className="contact">
              <h2 className="contactName">{this.props.name}</h2>
              <p>{this.props.number}</p>
          </div>
      )
  }
});

React.render(
  <PhoneBookApp data={data} pollInterval={200} />,
  document.getElementById('content')
  );
